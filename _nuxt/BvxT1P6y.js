import{d as Se,g as de,t as Re,m as Oe,c as J,q,_ as fe,E as H,a4 as $e,a5 as Be,A as xe,H as ke,w as Ae,Z as Fe}from"./DGHzHT3a.js";import{b as ae,c as Le,d as Me}from"./B3wAt0Eu.js";import{m as se}from"./Bp3YSIOJ.js";import{c as L}from"./DO6_CzPN.js";import{t as re}from"./Cq9Fpw4b.js";import{I as Q,M as ne,Q as ze,a0 as ce}from"./BuICEgOE.js";import{s as oe,d as V,h as Ve,at as W,o as be,B as Ie,v as ie,e as T,w as U,f as ve,c as me,a as pe,aa as Ue,a3 as he,u as x,n as Y,b as D,a9 as De,O as m,ae as Ke,r as le,g as ge,p as Ge,ao as He,U as We,au as qe,a6 as Ye,J as Je,ag as Qe}from"./Cdy4ovlM.js";import{E as F}from"./BUADUvnR.js";import{U as ye}from"./BB_Ol6Sd.js";import{f as Xe}from"./CNN4MVuY.js";import{g as Ze,b as je}from"./DpNtA3f6.js";import{l as et}from"./DXTTfs9a.js";import{b as tt}from"./F8doVSIJ.js";import{c as at}from"./CM4f_-Vl.js";import{i as st}from"./BgdxqH9p.js";import{f as nt}from"./uHDzdRfb.js";function ot(e,a){return a.length<2?e:Se(e,tt(a,0,-1))}function lt(e,a){return a=de(a,e),e=ot(e,a),e==null||delete e[Re(et(a))]}function rt(e){return st(e)?void 0:e}var it=1,ct=2,ut=4,dt=nt(function(e,a){var o={};if(e==null)return o;var f=!1;a=Oe(a,function(n){return n=de(n,e),f||(f=n.length>1),n}),at(e,Ze(e),o),f&&(o=je(o,it|ct|ut,rt));for(var s=a.length;s--;)lt(o,a[s]);return o});const ft=(e,a,o)=>Xe(e.subTree).filter(n=>{var P;return Ie(n)&&((P=n.type)==null?void 0:P.name)===a&&!!n.component}).map(n=>n.component.uid).map(n=>o[n]).filter(n=>!!n),bt=(e,a)=>{const o=oe({}),f=oe([]),s=new WeakMap,n=v=>{o.value[v.uid]=v,W(o),be(()=>{const u=v.getVnode().el,t=u.parentNode;if(!s.has(t)){s.set(t,[]);const d=t.insertBefore.bind(t);t.insertBefore=(y,c)=>(s.get(t).some(N=>y===N||c===N)&&W(o),d(y,c))}s.get(t).push(u)})},P=v=>{delete o.value[v.uid],W(o);const u=v.getVnode().el,t=u.parentNode,d=s.get(t),y=d.indexOf(u);d.splice(y,1)},p=()=>{f.value=ft(e,a,o.value)},g=v=>v.render(),h=V({setup(v,{slots:u}){return()=>(p(),u.default?Ve(g,{render:u.default}):null)}});return{children:f,addChild:n,removeChild:P,ChildrenSorter:h}},X=Symbol("tabsRootContextKey"),vt=J({tabs:{type:q(Array),default:()=>se([])},tabRefs:{type:q(Object),default:()=>se({})}}),_e="ElTabBar",mt=V({name:_e}),pt=V({...mt,props:vt,setup(e,{expose:a}){const o=e,f=ie(X);f||re(_e,"<el-tabs><el-tab-bar /></el-tabs>");const s=Q("tabs"),n=T(),P=T(),p=()=>{let t=0,d=0;const y=["top","bottom"].includes(f.props.tabPosition)?"width":"height",c=y==="width"?"x":"y",R=c==="x"?"left":"top";return o.tabs.every(N=>{if(ne(N.paneName))return!1;const r=o.tabRefs[N.paneName];if(!r)return!1;if(!N.active)return!0;t=r[`offset${L(R)}`],d=r[`client${L(y)}`];const C=window.getComputedStyle(r);return y==="width"&&(d-=Number.parseFloat(C.paddingLeft)+Number.parseFloat(C.paddingRight),t+=Number.parseFloat(C.paddingLeft)),!1}),{[y]:`${d}px`,transform:`translate${L(c)}(${t}px)`}},g=()=>P.value=p(),h=[],v=()=>{h.forEach(t=>t.stop()),h.length=0,Object.values(o.tabRefs).forEach(t=>{h.push(ae(t,g))})};U(()=>o.tabs,async()=>{await Y(),g(),v()},{immediate:!0});const u=ae(n,()=>g());return ve(()=>{h.forEach(t=>t.stop()),h.length=0,u.stop()}),a({ref:n,update:g}),(t,d)=>(pe(),me("div",{ref_key:"barRef",ref:n,class:he([x(s).e("active-bar"),x(s).is(x(f).props.tabPosition)]),style:Ue(P.value)},null,6))}});var ht=fe(pt,[["__file","tab-bar.vue"]]);const gt=J({panes:{type:q(Array),default:()=>se([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),yt={tabClick:(e,a,o)=>o instanceof Event,tabRemove:(e,a)=>a instanceof Event},ue="ElTabNav",_t=V({name:ue,props:gt,emits:yt,setup(e,{expose:a,emit:o}){const f=ie(X);f||re(ue,"<el-tabs><tab-nav /></el-tabs>");const s=Q("tabs"),n=Le(),P=Me(),p=T(),g=T(),h=T(),v=T({}),u=T(),t=T(!1),d=T(0),y=T(!1),c=T(!0),R=oe(),N=D(()=>["top","bottom"].includes(f.props.tabPosition)?"width":"height"),r=D(()=>({transform:`translate${N.value==="width"?"X":"Y"}(-${d.value}px)`})),C=()=>{if(!p.value)return;const i=p.value[`offset${L(N.value)}`],b=d.value;if(!b)return;const l=b>i?b-i:0;d.value=l},S=()=>{if(!p.value||!g.value)return;const i=g.value[`offset${L(N.value)}`],b=p.value[`offset${L(N.value)}`],l=d.value;if(i-l<=b)return;const E=i-l>b*2?l+b:i-b;d.value=E},k=async()=>{const i=g.value;if(!t.value||!h.value||!p.value||!i)return;await Y();const b=v.value[e.currentName];if(!b)return;const l=p.value,E=["top","bottom"].includes(f.props.tabPosition),_=b.getBoundingClientRect(),w=l.getBoundingClientRect(),K=E?i.offsetWidth-w.width:i.offsetHeight-w.height,A=d.value;let $=A;E?(_.left<w.left&&($=A-(w.left-_.left)),_.right>w.right&&($=A+_.right-w.right)):(_.top<w.top&&($=A-(w.top-_.top)),_.bottom>w.bottom&&($=A+(_.bottom-w.bottom))),$=Math.max($,0),d.value=Math.min($,K)},M=()=>{var i;if(!g.value||!p.value)return;e.stretch&&((i=u.value)==null||i.update());const b=g.value[`offset${L(N.value)}`],l=p.value[`offset${L(N.value)}`],E=d.value;l<b?(t.value=t.value||{},t.value.prev=E,t.value.next=E+l<b,b-E<l&&(d.value=b-l)):(t.value=!1,E>0&&(d.value=0))},I=i=>{let b=0;switch(i.code){case F.left:case F.up:b=-1;break;case F.right:case F.down:b=1;break;default:return}const l=Array.from(i.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let _=l.indexOf(i.target)+b;_<0?_=l.length-1:_>=l.length&&(_=0),l[_].focus({preventScroll:!0}),l[_].click(),z()},z=()=>{c.value&&(y.value=!0)},O=()=>y.value=!1,Z=(i,b)=>{v.value[b]=i},Te=async()=>{await Y();const i=v.value[e.currentName];i?.focus({preventScroll:!0})};return U(n,i=>{i==="hidden"?c.value=!1:i==="visible"&&setTimeout(()=>c.value=!0,50)}),U(P,i=>{i?setTimeout(()=>c.value=!0,50):c.value=!1}),ae(h,M),be(()=>setTimeout(()=>k(),0)),De(()=>M()),a({scrollToActiveTab:k,removeFocus:O,focusActiveTab:Te,tabListRef:g,tabBarRef:u,scheduleRender:()=>W(R)}),()=>{const i=t.value?[m("span",{class:[s.e("nav-prev"),s.is("disabled",!t.value.prev)],onClick:C},[m(H,null,{default:()=>[m($e,null,null)]})]),m("span",{class:[s.e("nav-next"),s.is("disabled",!t.value.next)],onClick:S},[m(H,null,{default:()=>[m(Be,null,null)]})])]:null,b=e.panes.map((l,E)=>{var _,w,K,A;const $=l.uid,j=l.props.disabled,G=(w=(_=l.props.name)!=null?_:l.index)!=null?w:`${E}`,ee=!j&&(l.isClosable||e.editable);l.index=`${E}`;const Pe=ee?m(H,{class:"is-icon-close",onClick:B=>o("tabRemove",l,B)},{default:()=>[m(xe,null,null)]}):null,Ee=((A=(K=l.slots).label)==null?void 0:A.call(K))||l.props.label,we=!j&&l.active?0:-1;return m("div",{ref:B=>Z(B,G),class:[s.e("item"),s.is(f.props.tabPosition),s.is("active",l.active),s.is("disabled",j),s.is("closable",ee),s.is("focus",y.value)],id:`tab-${G}`,key:`tab-${$}`,"aria-controls":`pane-${G}`,role:"tab","aria-selected":l.active,tabindex:we,onFocus:()=>z(),onBlur:()=>O(),onClick:B=>{O(),o("tabClick",l,G,B)},onKeydown:B=>{ee&&(B.code===F.delete||B.code===F.backspace)&&o("tabRemove",l,B)}},[Ee,Pe])});return R.value,m("div",{ref:h,class:[s.e("nav-wrap"),s.is("scrollable",!!t.value),s.is(f.props.tabPosition)]},[i,m("div",{class:s.e("nav-scroll"),ref:p},[e.panes.length>0?m("div",{class:[s.e("nav"),s.is(f.props.tabPosition),s.is("stretch",e.stretch&&["top","bottom"].includes(f.props.tabPosition))],ref:g,style:r.value,role:"tablist",onKeydown:I},[e.type?null:m(ht,{ref:u,tabs:[...e.panes],tabRefs:v.value},null),b]):null])])}}}),Nt=J({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:q(Function),default:()=>!0},stretch:Boolean}),te=e=>Ke(e)||ze(e),Ct={[ye]:e=>te(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>te(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>te(e),tabAdd:()=>!0},Tt=V({name:"ElTabs",props:Nt,emits:Ct,setup(e,{emit:a,slots:o,expose:f}){var s;const n=Q("tabs"),P=D(()=>["left","right"].includes(e.tabPosition)),{children:p,addChild:g,removeChild:h,ChildrenSorter:v}=bt(ge(),"ElTabPane"),u=T(),t=T((s=e.modelValue)!=null?s:"0"),d=async(r,C=!1)=>{var S,k,M,I;if(!(t.value===r||ne(r)))try{let z;if(e.beforeLeave){const O=e.beforeLeave(r,t.value);z=O instanceof Promise?await O:O}else z=!0;if(z!==!1){const O=(S=p.value.find(Z=>Z.paneName===t.value))==null?void 0:S.isFocusInsidePane();t.value=r,C&&(a(ye,r),a("tabChange",r)),(M=(k=u.value)==null?void 0:k.removeFocus)==null||M.call(k),O&&((I=u.value)==null||I.focusActiveTab())}}catch{}},y=(r,C,S)=>{r.props.disabled||(a("tabClick",r,S),d(C,!0))},c=(r,C)=>{r.props.disabled||ne(r.props.name)||(C.stopPropagation(),a("edit",r.props.name,"remove"),a("tabRemove",r.props.name))},R=()=>{a("edit",void 0,"add"),a("tabAdd")},N=r=>{const C=r.el.firstChild,S=["bottom","right"].includes(e.tabPosition)?r.children[0].el:r.children[1].el;C!==S&&C.before(S)};return U(()=>e.modelValue,r=>d(r)),U(t,async()=>{var r;await Y(),(r=u.value)==null||r.scrollToActiveTab()}),Ge(X,{props:e,currentName:t,registerPane:g,unregisterPane:h,nav$:u}),f({currentName:t,get tabNavRef(){return dt(u.value,["scheduleRender"])}}),()=>{const r=o["add-icon"],C=e.editable||e.addable?m("div",{class:[n.e("new-tab"),P.value&&n.e("new-tab-vertical")],tabindex:"0",onClick:R,onKeydown:I=>{[F.enter,F.numpadEnter].includes(I.code)&&R()}},[r?le(o,"add-icon"):m(H,{class:n.is("icon-plus")},{default:()=>[m(ke,null,null)]})]):null,S=()=>m(_t,{ref:u,currentName:t.value,editable:e.editable,type:e.type,panes:p.value,stretch:e.stretch,onTabClick:y,onTabRemove:c},null),k=m("div",{class:[n.e("header"),P.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[m(v,null,{default:S,$stable:!0}),C]),M=m("div",{class:n.e("content")},[le(o,"default")]);return m("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:e.type==="card",[n.m("border-card")]:e.type==="border-card"}],onVnodeMounted:N,onVnodeUpdated:N},[M,k])}}});var Pt=Tt;const Et=J({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Ne="ElTabPane",wt=V({name:Ne}),St=V({...wt,props:Et,setup(e){const a=e,o=ge(),f=He(),s=ie(X);s||re(Ne,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=Q("tab-pane"),P=T(),p=T(),g=D(()=>a.closable||s.props.closable),h=ce(()=>{var c;return s.currentName.value===((c=a.name)!=null?c:p.value)}),v=T(h.value),u=D(()=>{var c;return(c=a.name)!=null?c:p.value}),t=ce(()=>!a.lazy||v.value||h.value),d=()=>{var c;return(c=P.value)==null?void 0:c.contains(document.activeElement)};U(h,c=>{c&&(v.value=!0)});const y=We({uid:o.uid,getVnode:()=>o.vnode,slots:f,props:a,paneName:u,active:h,index:p,isClosable:g,isFocusInsidePane:d});return s.registerPane(y),ve(()=>{s.unregisterPane(y)}),qe(()=>{var c;f.label&&((c=s.nav$.value)==null||c.scheduleRender())}),(c,R)=>x(t)?Ye((pe(),me("div",{key:0,id:`pane-${x(u)}`,ref_key:"paneRef",ref:P,class:he(x(n).b()),role:"tabpanel","aria-hidden":!x(h),"aria-labelledby":`tab-${x(u)}`},[le(c.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Qe,x(h)]]):Je("v-if",!0)}});var Ce=fe(St,[["__file","tab-pane.vue"]]);const Gt=Ae(Pt,{TabPane:Ce}),Ht=Fe(Ce);export{Gt as E,Ht as a};
