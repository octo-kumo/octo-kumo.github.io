import{E as Y}from"./DwzLS5eA.js";import{E as Z}from"./Q-zsahgt.js";import{E as tt}from"./BDRYY09s.js";import{E as et}from"./87LDMlnu.js";import{E as rt}from"./BXXB-xa1.js";import{E as ot}from"./aGuH9aJj.js";import{E as lt}from"./CVsUS7wE.js";import{a as at,E as st}from"./D_1wdFc7.js";import{E as nt}from"./j3ngYAoL.js";import{E as it,a as ut}from"./CWkjjxcF.js";import{E as mt}from"./D3YgaH2U.js";import{x as ct}from"./DGHzHT3a.js";import{u as pt}from"./DdTJF8aR.js";import{a as I}from"./CNzSiRdO.js";import{d as dt,e as L,b as O,U as gt,c as s,M as p,J as v,O as _,a6 as _t,u as i,P as a,F as d,a5 as ft,a as t,N as n,K as f,_ as h,L as M}from"./Cdy4ovlM.js";import{_ as Et}from"./BuICEgOE.js";import"./BB_Ol6Sd.js";import"./B3wAt0Eu.js";import"./DQO4yU84.js";import"./Bp3YSIOJ.js";import"./BGxgnKOm.js";import"./CkyuYN5G.js";import"./Be6CvgVu.js";import"./BUOFL-6j.js";import"./Bl8XcKwz.js";import"./uHDzdRfb.js";import"./CexQJz7n.js";import"./CBgCChIc.js";import"./CAIGswUD.js";import"./DIZPvdmq.js";import"./BmU_cfaq.js";import"./Cq9Fpw4b.js";import"./DeD_TjHU.js";import"./lkZNKY1j.js";import"./Dzac1oxZ.js";import"./B30qYD90.js";import"./CNN4MVuY.js";import"./D7ee5kX0.js";const vt={key:0},ht={key:0,class:"flex gap-4"},Ct=dt({__name:"simulated-universe",setup(xt){const V=L(!1),u=pt("sim-u-lang","CHS"),{data:$,status:F}=I("simu-en",()=>fetch("https://raw.githubusercontent.com/octo-kumo/hsr-sim-universe-utils/master/out/handbook_eventsEN.json").then(e=>e.json())),{data:K,status:R}=I("simu-cn",()=>fetch("https://raw.githubusercontent.com/octo-kumo/hsr-sim-universe-utils/master/out/handbook_eventsCHS.json").then(e=>e.json())),q=O(()=>(u.value==="EN"?F.value:R.value)!=="pending"),b=O(()=>u.value==="EN"?$.value:K.value),T=e=>e.filter(r=>Array.isArray(r)),A=e=>e.find(r=>!Array.isArray(r)),C=gt({});function G(e,r){for(let E of r)if(!e.includes(E))return!1;return!0}function B(e,r){return C[e+"_"+r]?!0:Object.entries(b.value[e].dialogue.triggers).some(([E,g])=>Array.isArray(g.triggers)&&g.triggers.includes(r)&&B(e,E))}const y=L({CHS:{title:"星穹铁道·模拟宇宙 事件集",desc:"每次三选一都要去网上找太麻烦？在这里就可以搜！",label:"事件名字",showAll:"全部显示",end:"结束"},EN:{title:"HSR Simulated Universe Events",desc:"Too lazy to search for events every time you get a 3-choose-1? Worry not, just search here!",label:"Event name",showAll:"Show all",end:"End"}});function w(e,r,E,g=void 0){let N=g===void 0?!C[e+"_"+r.triggers[0]]:g;Object.values(E).map(m=>m.triggers).flat().filter(m=>!r.triggers.includes(m)).forEach(m=>{w(e,{triggers:[m]},[],!1)});for(let m of r.triggers){C[e+"_"+m]=N;let S=b.value[e].dialogue.triggers?.[m]?.triggers;if(Array.isArray(S))for(let H of S)w(e,b.value[e].dialogue.triggers[m],[],N)}}const k=L("");return(e,r)=>{const E=Y,g=Z,N=tt,m=et,S=rt,H=ot,J=lt,D=st,U=at,z=nt,P=ut,W=it,Q=mt,X=ft("auto-animate");return t(),s(d,null,[i(u)?(t(),p(S,{key:0,shadow:"never"},{header:a(()=>[f(n(y.value[i(u)].title)+" ",1),_(E,{checked:"",onClick:r[0]||(r[0]=o=>u.value=i(u)==="CHS"?"EN":"CHS")},{default:a(()=>[f(n(i(u)),1)]),_:1})]),default:a(()=>[_(g,{textContent:n(y.value[i(u)].desc)},null,8,["textContent"]),_(N,{modelValue:k.value,"onUpdate:modelValue":r[1]||(r[1]=o=>k.value=o),placeholder:y.value[i(u)].label,"prefix-icon":"ElIconSearch"in e?e.ElIconSearch:i(ct)},null,8,["modelValue","placeholder","prefix-icon"]),_(m,{modelValue:V.value,"onUpdate:modelValue":r[2]||(r[2]=o=>V.value=o)},{default:a(()=>[f(n(y.value[i(u)].showAll),1)]),_:1},8,["modelValue"])]),_:1})):v("",!0),_(H),i(q)&&i(b)?_t((t(),p(W,{key:1,gutter:5},{default:a(()=>[(t(!0),s(d,null,h(i(b),(o,x)=>(t(),s(d,null,[k.value.length===0||G(o.title,k.value)?(t(),p(P,{key:0,class:"my-2",cols:24,lg:8},{default:a(()=>[_(S,{shadow:"hover"},{header:a(()=>[f(n(o.title),1)]),default:a(()=>[_(J,{direction:"vertical",alignment:"flex-start"},{default:a(()=>[(t(!0),s(d,null,h(T(o.dialogue.prompt),(l,c)=>(t(),s(d,null,[c!==0?(t(),p(H,{key:0})):v("",!0),(t(!0),s(d,null,h(l,j=>(t(),p(g,{tag:"p",textContent:n(j)},null,8,["textContent"]))),256))],64))),256))]),_:2},1024),_(U,{class:"mt-2"},{default:a(()=>[(t(!0),s(d,null,h(A(o.dialogue.prompt),(l,c)=>(t(),p(D,{type:C[x+"_"+l.triggers?.[0]]?"primary":"default",size:"small",onClick:j=>w(x,l,A(o.dialogue.prompt))},{default:a(()=>[f(n(c),1),r[3]||(r[3]=M("br",null,null,-1)),f(" "+n(l.desc),1)]),_:2},1032,["type","onClick"]))),256))]),_:2},1024),(t(!0),s(d,null,h(Object.keys(o.dialogue.triggers??{}).sort(),l=>(t(),s(d,null,[B(x,l)||V.value?(t(),s("div",vt,[_(g,{class:"py-0",innerHTML:"<p>"+T(o.dialogue.triggers[l].lines).map(c=>c.join("</p><p>")).join("</br>")+"</p>"},null,8,["innerHTML"]),o.dialogue.triggers[l].triggers?(t(),s("div",ht,[(t(!0),s(d,null,h(o.dialogue.triggers[l].triggers,c=>(t(),p(z,{textContent:n(c)},null,8,["textContent"]))),256))])):v("",!0),o.dialogue.triggers[l].effect?(t(),p(z,{key:1,type:"success",textContent:n(o.dialogue.triggers[l].effect)},null,8,["textContent"])):v("",!0),_(U,null,{default:a(()=>[(t(!0),s(d,null,h(A(o.dialogue.triggers[l].lines),(c,j)=>(t(),p(D,{type:C[x+"_"+c.triggers[0]]?"primary":"default",size:"small",onClick:bt=>w(x,c,A(o.dialogue.triggers[l].lines))},{default:a(()=>[f(n(j),1),r[4]||(r[4]=M("br",null,null,-1)),f(" "+n(c.desc),1)]),_:2},1032,["type","onClick"]))),256))]),_:2},1024)])):v("",!0)],64))),256)),C[x+"_ALL_TALK_END"]?(t(),p(g,{key:0,tag:"p"},{default:a(()=>[f(n(y.value[i(u)].end),1)]),_:1})):v("",!0)]),_:2},1024)]),_:2},1024)):v("",!0)],64))),256))]),_:1})),[[X]]):(t(),p(Q,{key:2}))],64)}}}),ne=Et(Ct,[["__scopeId","data-v-0a80c248"]]);export{ne as default};
