import{ak as E,d as H,O as X,h as I,r as k,e as W,o as D,l as N,f as A,k as $,b as j,w as U,A as q}from"./Cdy4ovlM.js";import{P as C}from"./CNN4MVuY.js";import{c as F,q as x,L as O,M as P,N as K,o as V,O as G}from"./CXgh2bVR.js";import{I as S,l as J}from"./mpRoWkBO.js";import{t as Q}from"./Cq9Fpw4b.js";import{g as Z}from"./zcHPfVOM.js";const _=e=>{if(!e)return{onClick:E,onMousedown:E,onMouseup:E};let n=!1,a=!1;return{onClick:t=>{n&&a&&e(t),n=a=!1},onMousedown:t=>{n=t.target===t.currentTarget},onMouseup:t=>{a=t.target===t.currentTarget}}},R=F({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:x([String,Array,Object])},zIndex:{type:x([String,Number])}}),ee={click:e=>e instanceof MouseEvent},te="overlay";var oe=H({name:"ElOverlay",props:R,emits:ee,setup(e,{slots:n,emit:a}){const c=S(te),o=d=>{a("click",d)},{onClick:s,onMousedown:t,onMouseup:i}=_(e.customMaskEvent?void 0:o);return()=>e.mask?X("div",{class:[c.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:t,onMouseup:i},[k(n,"default")],C.STYLE|C.CLASS|C.PROPS,["onClick","onMouseup","onMousedown"]):I("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[k(n,"default")])}});const ie=oe,re=(e,n,a,c)=>{const o={offsetX:0,offsetY:0},s=W(!1),t=(u,l)=>{if(e.value){const{offsetX:p,offsetY:y}=o,r=e.value.getBoundingClientRect(),m=r.left,f=r.top,h=r.width,w=r.height,M=document.documentElement.clientWidth,L=document.documentElement.clientHeight,T=-m+p,Y=-f+y,z=M-m-h+p,B=L-f-(w<L?w:0)+y;c?.value||(u=Math.min(Math.max(u,T),z),l=Math.min(Math.max(l,Y),B)),o.offsetX=u,o.offsetY=l,e.value.style.transform=`translate(${O(u)}, ${O(l)})`}},i=u=>{const l=u.clientX,p=u.clientY,{offsetX:y,offsetY:r}=o,m=h=>{s.value||(s.value=!0);const w=y+h.clientX-l,M=r+h.clientY-p;t(w,M)},f=()=>{s.value=!1,document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",f)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",f)},d=()=>{n.value&&e.value&&(n.value.addEventListener("mousedown",i),window.addEventListener("resize",b))},v=()=>{n.value&&e.value&&(n.value.removeEventListener("mousedown",i),window.removeEventListener("resize",b))},g=()=>{o.offsetX=0,o.offsetY=0,e.value&&(e.value.style.transform="")},b=()=>{const{offsetX:u,offsetY:l}=o;t(u,l)};return D(()=>{N(()=>{a.value?d():v()})}),A(()=>{v()}),{isDragging:s,resetPosition:g,updatePosition:b}},de=(e,n={})=>{$(e)||Q("[useLockscreen]","You need to pass a ref param to this function");const a=n.ns||S("popup"),c=j(()=>a.bm("parent","hidden"));if(!J||P(document.body,c.value))return;let o=0,s=!1,t="0";const i=()=>{setTimeout(()=>{typeof document>"u"||s&&document&&(document.body.style.width=t,G(document.body,c.value))},200)};U(e,d=>{if(!d){i();return}s=!P(document.body,c.value),s&&(t=document.body.style.width,K(document.body,c.value)),o=Z(a.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,g=V(document.body,"overflowY");o>0&&(v||g==="scroll")&&s&&(document.body.style.width=`calc(100% - ${o}px)`)}),q(()=>i())};export{ie as E,de as a,_ as b,re as u};
