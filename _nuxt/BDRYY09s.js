import{ae as ee,g as Ye,s as _,e as L,w as q,a4 as we,u as t,n as V,d as Fe,ac as _e,ao as qe,b,o as Ge,x as Je,c as C,a as h,J as g,F as te,L as T,a3 as w,r as K,M as S,P as O,ab as A,W as xe,ad as Qe,ak as Xe,N as U,aa as Ce,aj as Se}from"./Cdy4ovlM.js";import{u as oe,b as Ze}from"./B3wAt0Eu.js";import{c as et,q as Y,T as tt,B as ot,_ as at,z as nt,C as st,ab as lt,ac as it,E as H,w as rt}from"./DGHzHT3a.js";import{l as Te,Q as Ie,I as Ee,P as ut}from"./BuICEgOE.js";import{i as ae,V as dt}from"./DQO4yU84.js";import{m as ct}from"./Bp3YSIOJ.js";import{u as pt}from"./BGxgnKOm.js";import{U as ne,I as ze,C as Ne}from"./BB_Ol6Sd.js";import{u as ft}from"./CAIGswUD.js";import{u as mt,a as vt}from"./DIZPvdmq.js";import{i as ht}from"./BmU_cfaq.js";import{d as Pe}from"./Cq9Fpw4b.js";const gt=()=>Te&&/firefox/i.test(window.navigator.userAgent);let x;const yt={height:"0",visibility:"hidden",overflow:gt()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},bt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"];function wt(n){const s=window.getComputedStyle(n),l=s.getPropertyValue("box-sizing"),o=Number.parseFloat(s.getPropertyValue("padding-bottom"))+Number.parseFloat(s.getPropertyValue("padding-top")),d=Number.parseFloat(s.getPropertyValue("border-bottom-width"))+Number.parseFloat(s.getPropertyValue("border-top-width"));return{contextStyle:bt.map(p=>[p,s.getPropertyValue(p)]),paddingSize:o,borderSize:d,boxSizing:l}}function ke(n,s=1,l){var o,d;x||(x=document.createElement("textarea"),((o=n.parentNode)!=null?o:document.body).appendChild(x));const{paddingSize:c,borderSize:p,boxSizing:i,contextStyle:f}=wt(n);f.forEach(([y,u])=>x?.style.setProperty(y,u)),Object.entries(yt).forEach(([y,u])=>x?.style.setProperty(y,u,"important")),x.value=n.value||n.placeholder||"";let m=x.scrollHeight;const v={};i==="border-box"?m=m+p:i==="content-box"&&(m=m-c),x.value="";const E=x.scrollHeight-c;if(Ie(s)){let y=E*s;i==="border-box"&&(y=y+c+p),m=Math.max(y,m),v.minHeight=`${y}px`}if(Ie(l)){let y=E*l;i==="border-box"&&(y=y+c+p),m=Math.min(y,m)}return v.height=`${m}px`,(d=x.parentNode)==null||d.removeChild(x),x=void 0,v}const xt=et({id:{type:String,default:void 0},size:ot,disabled:Boolean,modelValue:{type:Y([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Y([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:ae,default:tt},showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:ae},prefixIcon:{type:ae},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Y([Object,Array,String]),default:()=>ct({})},autofocus:Boolean,rows:{type:Number,default:2},...pt(["ariaLabel"]),inputmode:{type:Y(String),default:void 0},name:String}),Ct={[ne]:n=>ee(n),input:n=>ee(n),change:n=>ee(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent};function St(n,{disabled:s,beforeFocus:l,afterFocus:o,beforeBlur:d,afterBlur:c}={}){const p=Ye(),{emit:i}=p,f=_(),m=L(!1),v=u=>{const a=we(l)?l(u):!1;t(s)||m.value||a||(m.value=!0,i("focus",u),o?.())},E=u=>{var a;const z=we(d)?d(u):!1;t(s)||u.relatedTarget&&((a=f.value)!=null&&a.contains(u.relatedTarget))||z||(m.value=!1,i("blur",u),c?.())},y=u=>{var a,z;t(s)||ht(u.target)||(a=f.value)!=null&&a.contains(document.activeElement)&&f.value!==document.activeElement||(z=n.value)==null||z.focus()};return q([f,()=>t(s)],([u,a])=>{u&&(a?u.removeAttribute("tabindex"):u.setAttribute("tabindex","-1"))}),oe(f,"focus",v,!0),oe(f,"blur",E,!0),oe(f,"click",y,!0),{isFocused:m,wrapperRef:f,handleFocus:v,handleBlur:E}}const It=n=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(n);function Et({afterComposition:n,emit:s}){const l=L(!1),o=i=>{s?.("compositionstart",i),l.value=!0},d=i=>{var f;s?.("compositionupdate",i);const m=(f=i.target)==null?void 0:f.value,v=m[m.length-1]||"";l.value=!It(v)},c=i=>{s?.("compositionend",i),l.value&&(l.value=!1,V(()=>n(i)))};return{isComposing:l,handleComposition:i=>{i.type==="compositionend"?c(i):d(i)},handleCompositionStart:o,handleCompositionUpdate:d,handleCompositionEnd:c}}function zt(n){let s;function l(){if(n.value==null)return;const{selectionStart:d,selectionEnd:c,value:p}=n.value;if(d==null||c==null)return;const i=p.slice(0,Math.max(0,d)),f=p.slice(Math.max(0,c));s={selectionStart:d,selectionEnd:c,value:p,beforeTxt:i,afterTxt:f}}function o(){if(n.value==null||s==null)return;const{value:d}=n.value,{beforeTxt:c,afterTxt:p,selectionStart:i}=s;if(c==null||p==null||i==null)return;let f=d.length;if(d.endsWith(p))f=d.length-p.length;else if(d.startsWith(c))f=c.length;else{const m=c[i-1],v=d.indexOf(m,i-1);v!==-1&&(f=v+1)}n.value.setSelectionRange(f,f)}return[l,o]}const Nt="ElInput",Pt=Fe({name:Nt,inheritAttrs:!1}),kt=Fe({...Pt,props:xt,emits:Ct,setup(n,{expose:s,emit:l}){const o=n,d=_e(),c=ft(),p=qe(),i=b(()=>[o.type==="textarea"?z.b():a.b(),a.m(y.value),a.is("disabled",u.value),a.is("exceed",Ae.value),{[a.b("group")]:p.prepend||p.append,[a.m("prefix")]:p.prefix||o.prefixIcon,[a.m("suffix")]:p.suffix||o.suffixIcon||o.clearable||o.showPassword,[a.bm("suffix","password-clear")]:j.value&&Q.value,[a.b("hidden")]:o.type==="hidden"},d.class]),f=b(()=>[a.e("wrapper"),a.is("focus",J.value)]),{form:m,formItem:v}=mt(),{inputId:E}=vt(o,{formItemContext:v}),y=nt(),u=st(),a=Ee("input"),z=Ee("textarea"),$=_(),I=_(),G=L(!1),D=L(!1),se=L(),W=_(o.inputStyle),P=b(()=>$.value||I.value),{wrapperRef:Ve,isFocused:J,handleFocus:Me,handleBlur:Be}=St(P,{disabled:u,afterBlur(){var e;o.validateEvent&&((e=v?.validate)==null||e.call(v,"blur").catch(r=>Pe()))}}),le=b(()=>{var e;return(e=m?.statusIcon)!=null?e:!1}),M=b(()=>v?.validateState||""),ie=b(()=>M.value&&dt[M.value]),Re=b(()=>D.value?lt:it),Oe=b(()=>[d.style]),re=b(()=>[o.inputStyle,W.value,{resize:o.resize}]),N=b(()=>ut(o.modelValue)?"":String(o.modelValue)),j=b(()=>o.clearable&&!u.value&&!o.readonly&&!!N.value&&(J.value||G.value)),Q=b(()=>o.showPassword&&!u.value&&!!N.value),k=b(()=>o.showWordLimit&&!!o.maxlength&&(o.type==="text"||o.type==="textarea")&&!u.value&&!o.readonly&&!o.showPassword),X=b(()=>N.value.length),Ae=b(()=>!!k.value&&X.value>Number(o.maxlength)),He=b(()=>!!p.suffix||!!o.suffixIcon||j.value||o.showPassword||k.value||!!M.value&&le.value),[ue,de]=zt($);Ze(I,e=>{if(Le(),!k.value||o.resize!=="both")return;const r=e[0],{width:F}=r.contentRect;se.value={right:`calc(100% - ${F+15+6}px)`}});const B=()=>{const{type:e,autosize:r}=o;if(!(!Te||e!=="textarea"||!I.value))if(r){const F=Se(r)?r.minRows:void 0,ye=Se(r)?r.maxRows:void 0,be=ke(I.value,F,ye);W.value={overflowY:"hidden",...be},V(()=>{I.value.offsetHeight,W.value=be})}else W.value={minHeight:ke(I.value).minHeight}},Le=(e=>{let r=!1;return()=>{var F;if(r||!o.autosize)return;((F=I.value)==null?void 0:F.offsetParent)===null||(e(),r=!0)}})(B),R=()=>{const e=P.value,r=o.formatter?o.formatter(N.value):N.value;!e||e.value===r||(e.value=r)},Z=async e=>{ue();let{value:r}=e.target;if(o.formatter&&o.parser&&(r=o.parser(r)),!pe.value){if(r===N.value){R();return}l(ne,r),l(ze,r),await V(),R(),de()}},ce=e=>{let{value:r}=e.target;o.formatter&&o.parser&&(r=o.parser(r)),l(Ne,r)},{isComposing:pe,handleCompositionStart:fe,handleCompositionUpdate:me,handleCompositionEnd:ve}=Et({emit:l,afterComposition:Z}),$e=()=>{ue(),D.value=!D.value,setTimeout(de)},De=()=>{var e;return(e=P.value)==null?void 0:e.focus()},We=()=>{var e;return(e=P.value)==null?void 0:e.blur()},je=e=>{G.value=!1,l("mouseleave",e)},Ke=e=>{G.value=!0,l("mouseenter",e)},he=e=>{l("keydown",e)},Ue=()=>{var e;(e=P.value)==null||e.select()},ge=()=>{l(ne,""),l(Ne,""),l("clear"),l(ze,"")};return q(()=>o.modelValue,()=>{var e;V(()=>B()),o.validateEvent&&((e=v?.validate)==null||e.call(v,"change").catch(r=>Pe()))}),q(N,()=>R()),q(()=>o.type,async()=>{await V(),R(),B()}),Ge(()=>{!o.formatter&&o.parser,R(),V(B)}),s({input:$,textarea:I,ref:P,textareaStyle:re,autosize:Je(o,"autosize"),isComposing:pe,focus:De,blur:We,select:Ue,clear:ge,resizeTextarea:B}),(e,r)=>(h(),C("div",{class:w([t(i),{[t(a).bm("group","append")]:e.$slots.append,[t(a).bm("group","prepend")]:e.$slots.prepend}]),style:Ce(t(Oe)),onMouseenter:Ke,onMouseleave:je},[g(" input "),e.type!=="textarea"?(h(),C(te,{key:0},[g(" prepend slot "),e.$slots.prepend?(h(),C("div",{key:0,class:w(t(a).be("group","prepend"))},[K(e.$slots,"prepend")],2)):g("v-if",!0),T("div",{ref_key:"wrapperRef",ref:Ve,class:w(t(f))},[g(" prefix slot "),e.$slots.prefix||e.prefixIcon?(h(),C("span",{key:0,class:w(t(a).e("prefix"))},[T("span",{class:w(t(a).e("prefix-inner"))},[K(e.$slots,"prefix"),e.prefixIcon?(h(),S(t(H),{key:0,class:w(t(a).e("icon"))},{default:O(()=>[(h(),S(A(e.prefixIcon)))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0),T("input",xe({id:t(E),ref_key:"input",ref:$,class:t(a).e("inner")},t(c),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?D.value?"text":"password":e.type,disabled:t(u),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:t(fe),onCompositionupdate:t(me),onCompositionend:t(ve),onInput:Z,onChange:ce,onKeydown:he}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),g(" suffix slot "),t(He)?(h(),C("span",{key:1,class:w(t(a).e("suffix"))},[T("span",{class:w(t(a).e("suffix-inner"))},[!t(j)||!t(Q)||!t(k)?(h(),C(te,{key:0},[K(e.$slots,"suffix"),e.suffixIcon?(h(),S(t(H),{key:0,class:w(t(a).e("icon"))},{default:O(()=>[(h(),S(A(e.suffixIcon)))]),_:1},8,["class"])):g("v-if",!0)],64)):g("v-if",!0),t(j)?(h(),S(t(H),{key:1,class:w([t(a).e("icon"),t(a).e("clear")]),onMousedown:Qe(t(Xe),["prevent"]),onClick:ge},{default:O(()=>[(h(),S(A(e.clearIcon)))]),_:1},8,["class","onMousedown"])):g("v-if",!0),t(Q)?(h(),S(t(H),{key:2,class:w([t(a).e("icon"),t(a).e("password")]),onClick:$e},{default:O(()=>[(h(),S(A(t(Re))))]),_:1},8,["class"])):g("v-if",!0),t(k)?(h(),C("span",{key:3,class:w(t(a).e("count"))},[T("span",{class:w(t(a).e("count-inner"))},U(t(X))+" / "+U(e.maxlength),3)],2)):g("v-if",!0),t(M)&&t(ie)&&t(le)?(h(),S(t(H),{key:4,class:w([t(a).e("icon"),t(a).e("validateIcon"),t(a).is("loading",t(M)==="validating")])},{default:O(()=>[(h(),S(A(t(ie))))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0)],2),g(" append slot "),e.$slots.append?(h(),C("div",{key:1,class:w(t(a).be("group","append"))},[K(e.$slots,"append")],2)):g("v-if",!0)],64)):(h(),C(te,{key:1},[g(" textarea "),T("textarea",xe({id:t(E),ref_key:"textarea",ref:I,class:[t(z).e("inner"),t(a).is("focus",t(J))]},t(c),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:t(u),readonly:e.readonly,autocomplete:e.autocomplete,style:t(re),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t(fe),onCompositionupdate:t(me),onCompositionend:t(ve),onInput:Z,onFocus:t(Me),onBlur:t(Be),onChange:ce,onKeydown:he}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),t(k)?(h(),C("span",{key:0,style:Ce(se.value),class:w(t(a).e("count"))},U(t(X))+" / "+U(e.maxlength),7)):g("v-if",!0)],64))],38))}});var Ft=at(kt,[["__file","input.vue"]]);const Kt=rt(Ft);export{Kt as E,St as a,Et as u};
