import{E as ze}from"./87LDMlnu.js";import{_ as $e}from"./BRFRqGDe.js";import{E as qe}from"./D_1wdFc7.js";import{E as Qe}from"./BSugoRgj.js";import{a as Ke,E as Je}from"./B_ozFShC.js";import{E as je,a as Ze,b as el}from"./fCUrrowG.js";import{E as ll,a as tl}from"./ZXq9T0Z-.js";import"./DGHzHT3a.js";import"./BDRYY09s.js";import"./j3ngYAoL.js";import"./D8uBuRJ8.js";/* empty css        */import{d as al,b as Y,e as b,U as ol,o as nl,H as rl,c as $,L as c,a6 as il,M as we,P as p,a8 as ul,u as v,a5 as sl,a as F,J as dl,O as s,F as ge,_ as Me,K as x,k as T,N as q}from"./Cdy4ovlM.js";import{u as ml}from"./CaNOmm-D.js";import{c as vl}from"./DdTJF8aR.js";import{_ as pl}from"./BuICEgOE.js";import"./BGxgnKOm.js";import"./CkyuYN5G.js";import"./Be6CvgVu.js";import"./BUOFL-6j.js";import"./Bl8XcKwz.js";import"./uHDzdRfb.js";import"./CexQJz7n.js";import"./CBgCChIc.js";import"./BB_Ol6Sd.js";import"./DIZPvdmq.js";import"./Cq9Fpw4b.js";import"./DeD_TjHU.js";import"./lkZNKY1j.js";import"./Dzac1oxZ.js";import"./B30qYD90.js";import"./DQO4yU84.js";/* empty css        */import"./CE1G-McA.js";import"./BUADUvnR.js";import"./B5wEAh72.js";import"./B3wAt0Eu.js";import"./CshZ0bwa.js";import"./DpNtA3f6.js";import"./CM4f_-Vl.js";import"./DI9FKtlJ.js";import"./DO6_CzPN.js";import"./YEiEv42s.js";import"./LkQYafET.js";import"./DSxtO90N.js";import"./DkiyPiMI.js";import"./CNN4MVuY.js";import"./Bp3YSIOJ.js";import"./CAIGswUD.js";import"./BmU_cfaq.js";import"./CjP-gbnH.js";import"./BKGLX9HH.js";import"./DCTLXrZ8.js";import"./D7ee5kX0.js";function R(k){if(isNaN(k))return"NaN";if(!isFinite(k))return k>0?"Infinity":"-Infinity";const H=Math.abs(k),ie=1e6,X=1e-6,m=10;if(H>=ie||H>0&&H<X)return k.toExponential(5);let L=k.toString();if(L.includes(".")&&L.length>m){const[B,ue]=L.split(".");if(B.length+ue.length>m){const se=m-B.length;L=k.toFixed(se)}}return k%1===0?k.toFixed(0):L}const fl={class:"flex h-600px"},cl={class:"px-2"},hl=al({__name:"triangulator",setup(k){ul(e=>({"7c25d6cf":v(He)}));const H=ml(),ie=Y(()=>H.value==="dark"),X=b(),m={scale:100,_scale:100,ox:400,_ox:400,oy:300,_oy:400};function L(e,l,a){const{x:o,y:i,dx:u,dy:n}=a;if(e===o&&l===i)return 0;const r=Math.atan2(l-i,e-o),h=Math.atan2(n,u);let d=r-h;return d=Math.atan2(Math.sin(d),Math.cos(d)),d*d}function B(e,l,a){return a.reduce((o,i)=>o+L(e,l,i),0)}function ue(e){if(e.length===0)return{minX:0,minY:0,maxX:0,maxY:0};const l=Math.min(...e.map(u=>u.x)),a=Math.min(...e.map(u=>u.y)),o=Math.max(...e.map(u=>u.x)),i=Math.max(...e.map(u=>u.y));return{minX:l,minY:a,maxX:o,maxY:i}}function Ve(e,l,a,o,i){const u=ue(e);let n=(u.minX+u.maxX)/2,r=(u.minY+u.maxY)/2;const h=Math.hypot(u.maxX-u.minX,u.maxY-u.minY);let d=1/0,f=B(n,r,e),y=l,D=[],E=0;const t=Z.value;for(i(()=>E=o);E<o;E++){d=f;let A=e.reduce((G,fe)=>{const{x:C,y:P,dx:ce,dy:he}=fe;if(n===C&&r===P)return G;const z=Math.atan2(r-P,n-C),ye=Math.atan2(he,ce);let I=z-ye;I=Math.atan2(Math.sin(I),Math.cos(I));let be=t===0?1:1/Math.pow(Math.hypot(n-C,r-P),t);return G+2*I*-Math.sin(z)*h*be},0),g=e.reduce((G,fe)=>{const{x:C,y:P,dx:ce,dy:he}=fe;if(n===C&&r===P)return G;const z=Math.atan2(r-P,n-C),ye=Math.atan2(he,ce);let I=z-ye;I=Math.atan2(Math.sin(I),Math.cos(I));let be=t===0?1:1/Math.pow(Math.hypot(n-C,r-P),t);return G+2*I*Math.cos(z)*h*be},0);const re={x:n,y:r,gx:A,gy:g,error:0};if(n-=y*A,r-=y*g,re.error=f=B(n,r,e),D.push(re),y=f<d?y*oe.value:y*ne.value,y>h&&(y=h),Se.value=f,Math.abs(d-f)<a)break;d=f}return V.value=D,J.value&&(n=Math.round(n),r=Math.round(r)),{x:n,y:r}}function se(e,l,a,o,i,u){const n=o+(0-a)*(u-o)/(i-a);if(n>=0&&n<=l&&a<=0)return[0,n];const r=o+(e-a)*(u-o)/(i-a);if(r>=0&&r<=l&&a>e)return[e,r];const h=a+(0-o)*(i-a)/(u-o);if(h>=0&&h<=e&&o<=0)return[h,0];const d=a+(l-o)*(i-a)/(u-o);if(d>=0&&d<=e&&o>l)return[d,l]}function xe(e,l,a){const{x:o,y:i,dx:u,dy:n}=a,r=Math.hypot(u,n);if(r===0)return 0;const h=u/r,d=n/r;return Math.abs(d*(e-o)-h*(l-i))}function De(e,l,a){const o=a.map(i=>xe(e,l,i));return Math.max(...o)}let de=-1;const S=Y(()=>ie.value?{target:"#f00",fore:"#fff",grid:"#fff2",gridHigh:"#fff7",anchor:"#eee",anchorSelect:"#99f",anchorHover:"#9f9",anchorDisable:"#444"}:{target:"#f00",fore:"#000",grid:"#0002",gridHigh:"#0007",anchor:"#222",anchorSelect:"#22f",anchorHover:"#2f2",anchorDisable:"#bbb"});function Ie(e){if(!V.value||V.value.length===0)return;const l=ee.value;if(l===0)return;e.setLineDash([]),e.strokeStyle=S.value.fore,e.lineWidth=1,e.save(),e.translate(0,e.canvas.height-50);const a=l===1?n=>n:l===2?n=>Math.log(n):l===3?n=>Math.exp(n):l===-1?n=>1/n:n=>n,o=Math.max(...V.value.map(n=>a(n.error))),i=Math.min(...V.value.map(n=>a(n.error))),u=n=>(n-i)/(o-i);e.beginPath(),e.moveTo(0,50-u(a(V.value[0]?.error??0))*50),V.value.forEach((n,r)=>{e.lineTo(r*100/V.value.length,50-50*u(a(n.error)))}),e.stroke(),e.restore()}function Ne(e){e.setLineDash([]),e.strokeStyle=S.value.grid,e.lineWidth=1;const{scale:l,ox:a,oy:o}=m,i=Math.pow(2,Math.ceil(Math.log(100/l)/Math.log(2))),u=Math.ceil(-a/l/i)*i,n=Math.ceil(-o/l/i)*i;for(let r=u;r*l+a<e.canvas.width;r+=i)e.strokeStyle=r===0?S.value.gridHigh:S.value.grid,e.beginPath(),e.moveTo(r*l+a,0),e.lineTo(r*l+a,e.canvas.height),e.stroke();for(let r=n;r*l+o<e.canvas.height;r+=i)e.strokeStyle=r===0?S.value.gridHigh:S.value.grid,e.beginPath(),e.moveTo(0,r*l+o),e.lineTo(e.canvas.width,r*l+o),e.stroke();e.font="12px sans-serif",e.textAlign="right",e.fillStyle=S.value.fore,e.strokeStyle=S.value.fore,e.fillText(`${i}`,e.canvas.width-30,e.canvas.height-30),e.beginPath(),e.moveTo(e.canvas.width-20,e.canvas.height-30),e.lineTo(e.canvas.width-20,e.canvas.height-20),e.lineTo(e.canvas.width-20-i*l,e.canvas.height-20),e.lineTo(e.canvas.width-20-i*l,e.canvas.height-30),e.stroke()}function _e(){const e=X.value?.getContext("2d");if(!e)return;e.clearRect(0,0,X.value.width,X.value.height),Ne(e),Ie(e),e.lineWidth=2;const{fore:l,anchor:a,anchorSelect:o,anchorHover:i,anchorDisable:u,target:n}=S.value;if(W.forEach(d=>{e.setLineDash([10,10]);let[f,y]=O(d.x,d.y);e.fillStyle=d.disabled?u:d===U.value?o:d===ve.value?i:a,e.strokeStyle=(d.disabled?u:d===M.value?o:d===pe.value?i:a)+"9";let D=!1;if(f<0||f>e.canvas.width||y<0||y>e.canvas.height){D=!0;const E=se(e.canvas.width,e.canvas.height,f,y,f+d.dx*1e4,y-d.dy*1e4);if(E)[f,y]=E;else return}e.beginPath(),e.moveTo(f,y),e.lineTo(f+d.dx*1e4,y-d.dy*1e4),e.stroke(),e.setLineDash([]),e.beginPath(),e.arc(f,y,5,0,2*Math.PI),D?e.stroke():e.fill()}),j.value){e.fillStyle=l,e.strokeStyle=l+"9",e.beginPath();for(let d=0;d<V.value.length-1;d++){const{x:f,y}=V.value[d],{x:D,y:E}=V.value[d+1],[t,A]=O(f,y),[g,re]=O(D,E);e.moveTo(t,A),e.lineTo(g,re)}e.stroke()}e.fillStyle=n,e.strokeStyle=n,e.lineWidth=2,e.beginPath();const[r,h]=O(N.value.x,N.value.y);e.arc(r,h,Ue.value*m.scale,0,2*Math.PI),e.moveTo(r-5,h),e.lineTo(r+5,h),e.moveTo(r,h-5),e.lineTo(r,h+5),e.stroke(),e.textAlign="center",e.font='20px "STIX Two Math", "Cambria Math", "Times New Roman", serif',e.fillText(`(${R(N.value.x)}, ${R(N.value.y)})`,r,h-10),Xe(),de=requestAnimationFrame(_e)}function me(e){const l=e.target.getBoundingClientRect(),a=e.clientX-l.left,o=e.clientY-l.top;return[a,o]}function ke(e,l){return[(e-m.ox)/m.scale,(-l+m.oy)/m.scale]}function O(e,l){return[e*m.scale+m.ox,-l*m.scale+m.oy]}function Ae([e,l],[a,o]){return Math.hypot(e-a,l-o)}const ve=b(void 0),pe=b(void 0),U=b(void 0),M=b(void 0),_=b(void 0);function Ee(e,l){return Q.value.find(a=>Ae(O(a.x,a.y),[e,l])<5)}function Te(e,l){const[a,o]=ke(e,l);return Q.value.find(i=>xe(a,o,i)*m.scale<5&&(a-i.x)*i.dx+(o-i.y)*i.dy>0)}function Le(e){_.value=me(e),U.value=Ee(_.value[0],_.value[1]),U.value?M.value=void 0:M.value=Te(_.value[0],_.value[1]),e.preventDefault()}function Ce(e){_.value=void 0,e.preventDefault()}function Pe(e){const[l,a]=me(e);if(_.value){const o=l-_.value[0],i=a-_.value[1];if(_.value=[l,a],U.value)U.value.x+=o/m.scale,U.value.y-=i/m.scale;else if(M.value){const[u,n]=ke(l,a);M.value.dx=u-M.value.x,M.value.dy=n-M.value.y;const r=Math.hypot(M.value.dx,M.value.dy);M.value.dx/=r,M.value.dy/=r}else m._ox=m.ox+=o,m._oy=m.oy+=i}else ve.value=Ee(l,a),pe.value=Te(l,a);e.preventDefault()}function Fe(e){const[l,a]=me(e),o=Math.exp(-e.deltaY/500);m._scale*=o,m._ox=l+(m._ox-l)*o,m._oy=a+(m._oy-a)*o,e.preventDefault()}function Xe(){m.scale=(m.scale+m._scale)/2,m.ox=(m.ox+m._ox)/2,m.oy=(m.oy+m._oy)/2}function Ye(e){}function Re(e){}const w=b({x:0,y:0,dx:0,dy:0}),W=ol([{x:0,y:0,dx:1,dy:1},{x:1,y:0,dx:0,dy:1},{x:0,y:1,dx:1,dy:0}]),Q=Y(()=>W.filter(e=>!e.disabled)),He=Y(()=>_.value?(U.value||U.value,"grabbing"):ve.value||pe.value?"grab":"default"),K=b(!1),J=b(!1),j=b(!1),Z=b(1),Be=[{label:"None",value:0},{label:"Linear",value:1},{label:"Quadratic",value:2},{label:"Cubic",value:3},{label:"Quartic",value:4},{label:"Quintic",value:5},{label:"Inverse",value:-1}],ee=b(0),Oe=[{label:"Hide",value:0},{label:"Linear",value:1},{label:"Logarithmic",value:2},{label:"Exponential",value:3},{label:"Inverse",value:-1}],le=b(1e-9),te=b(100),ae=b(.1),oe=b(1.2),ne=b(.2),We=Y(()=>V.value.length),Se=b(0),Ge=b(!1),N=vl(async e=>Ve(Q.value,ae.value,le.value,te.value,e),{x:1,y:1},Ge),V=b([]),Ue=Y(()=>De(N.value.x,N.value.y,Q.value));return nl(()=>{de=requestAnimationFrame(_e)}),rl(()=>{cancelAnimationFrame(de)}),(e,l)=>{const a=ze,o=$e,i=qe,u=Qe,n=Je,r=el,h=Ze,d=Ke,f=tl,y=ll,D=je,E=sl("auto-animate");return F(),$("div",fl,[c("canvas",{ref_key:"canvas",ref:X,width:"800",height:"600",id:"canvas",onMousedown:Le,onMousemove:Pe,onMouseup:Ce,onWheel:Fe,onMouseleave:Re,onMouseenter:Ye},null,544),il((F(),we(D,{id:"controls"},{default:p(()=>[c("table",cl,[l[18]||(l[18]=c("thead",null,[c("tr",null,[c("th",null,"Points"),c("th",null,"x"),c("th",null,"y"),c("th",null,"dx"),c("th",null,"dy"),c("th")])],-1)),c("tbody",null,[(F(!0),$(ge,null,Me(v(W),(t,A)=>(F(),$("tr",{key:A},[c("td",null,[s(a,{modelValue:t.disabled,"onUpdate:modelValue":g=>t.disabled=g,label:A+1+(v(U)===t||v(M)==t?" â†":"")},null,8,["modelValue","onUpdate:modelValue","label"])]),c("td",null,[s(o,{modelValue:t.x,"onUpdate:modelValue":g=>t.x=g,"hide-eval":"",disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])]),c("td",null,[s(o,{modelValue:t.y,"onUpdate:modelValue":g=>t.y=g,"hide-eval":"",disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])]),c("td",null,[s(o,{modelValue:t.dx,"onUpdate:modelValue":g=>t.dx=g,"hide-eval":"",disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])]),c("td",null,[s(o,{modelValue:t.dy,"onUpdate:modelValue":g=>t.dy=g,"hide-eval":"",disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])]),c("td",null,[s(i,{onClick:g=>v(W).splice(A,1)},{default:p(()=>[...l[15]||(l[15]=[x("x",-1)])]),_:2},1032,["onClick"])])]))),128)),c("tr",null,[l[17]||(l[17]=c("td",null,null,-1)),c("td",null,[s(o,{modelValue:v(w).x,"onUpdate:modelValue":l[0]||(l[0]=t=>v(w).x=t),"hide-eval":""},null,8,["modelValue"])]),c("td",null,[s(o,{modelValue:v(w).y,"onUpdate:modelValue":l[1]||(l[1]=t=>v(w).y=t),"hide-eval":""},null,8,["modelValue"])]),c("td",null,[s(o,{modelValue:v(w).dx,"onUpdate:modelValue":l[2]||(l[2]=t=>v(w).dx=t),"hide-eval":""},null,8,["modelValue"])]),c("td",null,[s(o,{modelValue:v(w).dy,"onUpdate:modelValue":l[3]||(l[3]=t=>v(w).dy=t),"hide-eval":""},null,8,["modelValue"])]),c("td",null,[s(i,{onClick:l[4]||(l[4]=t=>v(W).push({...v(w)}))},{default:p(()=>[...l[16]||(l[16]=[x("+",-1)])]),_:1})])])])]),v(K)?(F(),we(d,{key:0,"label-position":"top",inline:"",class:"px-2"},{default:p(()=>[s(n,{label:"Tolerance"},{default:p(()=>[s(u,{modelValue:v(le),"onUpdate:modelValue":l[5]||(l[5]=t=>T(le)?le.value=t:null),"controls-position":"right"},null,8,["modelValue"])]),_:1}),s(n,{label:"Max Iterations"},{default:p(()=>[s(u,{modelValue:v(te),"onUpdate:modelValue":l[6]||(l[6]=t=>T(te)?te.value=t:null),"controls-position":"right",min:1},null,8,["modelValue"])]),_:1}),s(n,{label:"Initial Learning Rate"},{default:p(()=>[s(u,{modelValue:v(ae),"onUpdate:modelValue":l[7]||(l[7]=t=>T(ae)?ae.value=t:null),"controls-position":"right",min:.01,step:.01},null,8,["modelValue"])]),_:1}),s(n,{label:"Reward Multiplier"},{default:p(()=>[s(u,{modelValue:v(oe),"onUpdate:modelValue":l[8]||(l[8]=t=>T(oe)?oe.value=t:null),"controls-position":"right",min:.01,step:.01},null,8,["modelValue"])]),_:1}),s(n,{label:"Error Multiplier"},{default:p(()=>[s(u,{modelValue:v(ne),"onUpdate:modelValue":l[9]||(l[9]=t=>T(ne)?ne.value=t:null),"controls-position":"right",min:.01,step:.01},null,8,["modelValue"])]),_:1}),s(n,{label:"Show Optimization Path"},{default:p(()=>[s(a,{modelValue:v(j),"onUpdate:modelValue":l[10]||(l[10]=t=>T(j)?j.value=t:null)},null,8,["modelValue"])]),_:1}),s(n,{label:"Round Target Number"},{default:p(()=>[s(a,{modelValue:v(J),"onUpdate:modelValue":l[11]||(l[11]=t=>T(J)?J.value=t:null)},null,8,["modelValue"])]),_:1}),s(n,{label:"Distance Falloff"},{default:p(()=>[s(h,{modelValue:v(Z),"onUpdate:modelValue":l[12]||(l[12]=t=>T(Z)?Z.value=t:null)},{default:p(()=>[(F(),$(ge,null,Me(Be,t=>s(r,{key:t.label,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),s(n,{label:"Error Graph"},{default:p(()=>[s(h,{modelValue:v(ee),"onUpdate:modelValue":l[13]||(l[13]=t=>T(ee)?ee.value=t:null)},{default:p(()=>[(F(),$(ge,null,Me(Oe,t=>s(r,{key:t.label,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})):dl("",!0),s(y,{class:"margin-top px-2",title:"Results",border:""},{extra:p(()=>[s(a,{modelValue:v(K),"onUpdate:modelValue":l[14]||(l[14]=t=>T(K)?K.value=t:null),label:"Show options",size:"large"},null,8,["modelValue"])]),default:p(()=>[s(f,null,{label:p(()=>[...l[19]||(l[19]=[x("Iterations",-1)])]),default:p(()=>[x(" "+q(v(We)),1)]),_:1}),s(f,null,{label:p(()=>[...l[20]||(l[20]=[x("X",-1)])]),default:p(()=>[x(" "+q(("displayNumber"in e?e.displayNumber:v(R))(v(N).x)),1)]),_:1}),s(f,null,{label:p(()=>[...l[21]||(l[21]=[x("Y",-1)])]),default:p(()=>[x(" "+q(("displayNumber"in e?e.displayNumber:v(R))(v(N).y)),1)]),_:1}),s(f,null,{label:p(()=>[...l[22]||(l[22]=[x("Radius",-1)])]),default:p(()=>[x(" "+q(("displayNumber"in e?e.displayNumber:v(R))(v(Ue))),1)]),_:1}),s(f,null,{label:p(()=>[...l[23]||(l[23]=[x("Error",-1)])]),default:p(()=>[x(" "+q(("displayNumber"in e?e.displayNumber:v(R))(v(Se))),1)]),_:1})]),_:1})]),_:1})),[[E]])])}}}),yt=pl(hl,[["__scopeId","data-v-af72bd09"]]);export{yt as default};
